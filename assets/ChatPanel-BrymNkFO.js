import{r as d,j as e,X as g,f as i,b as u,d as h}from"./index-BRom9pyy.js";function y({chats:x,activeChat:r,setActiveChat:c,newMessage:l,setNewMessage:o,sendMessage:t,onClose:m}){var n;const a=d.useRef(null);d.useEffect(()=>{var s;(s=a.current)==null||s.scrollIntoView({behavior:"smooth"})},[r==null?void 0:r.messages]);const f=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),t())};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl h-[80vh] overflow-hidden flex flex-col shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"الرسائل"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 hover:bg-gray-200 p-2 rounded-lg transition-colors",children:e.jsx(g,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-80 border-l border-gray-200 overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-600 mb-3",children:"المحادثات"}),e.jsx("div",{className:"space-y-2",children:x.map(s=>e.jsx("button",{onClick:()=>c(s),className:`w-full p-3 rounded-xl hover:bg-white transition-colors text-right ${(r==null?void 0:r.id)===s.id?"bg-white shadow-sm":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-gray-600 to-gray-800 text-white flex items-center justify-center text-xl flex-shrink-0",children:s.user.avatar}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:s.user.name}),e.jsx("span",{className:"text-xs text-gray-500",children:i(s.timestamp)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.lastMessage}),s.unread>0&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500 text-white text-xs rounded-full ml-2",children:s.unread})]})]})]})},s.id))})]})}),e.jsx("div",{className:"flex-1 flex flex-col",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-600 to-gray-800 text-white flex items-center justify-center text-lg",children:r.user.avatar}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:r.user.name}),e.jsx("div",{className:"text-xs text-gray-500",children:r.user.handle})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[(n=r.messages)==null?void 0:n.map(s=>e.jsx("div",{className:`flex ${s.sender==="currentUser"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${s.sender==="currentUser"?"bg-gray-900 text-white":"bg-white text-gray-900 border border-gray-200"}`,children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsx("p",{className:`text-xs mt-1 ${s.sender==="currentUser"?"text-gray-300":"text-gray-500"}`,children:i(s.timestamp)})]})},s.id)),e.jsx("div",{ref:a})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:l,onChange:s=>o(s.target.value),onKeyPress:f,placeholder:"اكتب رسالة...",className:"flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-gray-900 transition-all"}),e.jsxs("button",{onClick:t,disabled:!l.trim(),className:"px-6 py-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{children:"إرسال"})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"اختر محادثة لبدء المراسلة"})]})})})]})]})})}export{y as default};
